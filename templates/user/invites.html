{% extends "Base.html" %}
{% block head %}
    <title>دعوت</title>
    <style>
        form{
            border-collapse: collapse;
        }
        th, td {
            border: 2px solid black; 
            padding: 8px; 
            text-align: center; 
        }
    </style>

    {% endblock %}
    {% block body %}
    <table>
        <tr>
            <th>#</th>
            <th>نام و نام خانوادگی</th>
        </tr>
        {%for i in invitees%}
        <tr>
            <td>{{loop.index}}</td>
            <td>{{i.invitee}}</td>
        </tr>
        {% endfor %}
    </table>

    <br>

    <h1>ارسال پیامک</h1>
    <label for="phone">شماره موبایل:</label>
    <input type="text" id="phone" placeholder="09123456789">
    <br>
    <button onclick="sendSMS()">ارسال دعوتنامه</button>
    

    <script>
        function sendSMS() {
            const phoneNumber = document.getElementById('phone').value;
            const message = "سلام دوست عزیز!\nامیدوارم حالت خوب باشه. من یه خبر خوب برات دارم:\nتو میتونی از طریق لینک زیر وارد مسابقه بزرگ «دانا پلاس شو» بشی و با خوندن کتاب، کلی جایزه ببری!\n{{ url_for('user.register', _external=True) }}?invite={{current_user.invite_auth}}"
            const smsLink = `sms:${phoneNumber}?body=${encodeURIComponent(message)}`;

            const smsAnchor = document.createElement("a");
            smsAnchor.href = smsLink;
            document.body.appendChild(smsAnchor)

            smsAnchor.click()
            smsAnchor.remove()
        }
    </script>
{% endblock %}