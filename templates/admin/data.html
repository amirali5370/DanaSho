{% extends "Base.html" %}
{% block head %}
    <title>داشبورد</title>

    <link href="{{ url_for('static', filename='libraries/bootstrap-5/bootstrap.min.css') }}" rel="stylesheet" />
    <script src="{{ url_for('static', filename='libraries/bootstrap-5/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='libraries/dselect.js') }} "></script>
    
    <title>اطلاعات شرکت کنندگان</title>
    <style>
        body{
            display: flex;
            align-items: center;
            flex-direction: column;
        }
        .dselect-wrapper {
            width: 500px;
        }
        .dropdown-menu *{
            text-align: right;
        }
    </style>

{% endblock %}
{% block body %}
    <h3>اطلاعات کاربران</h3>
    <div>
        <select onchange="send()" name="select_box" class="form-select" id="select_box">
            <option value="">انتخاب دانش آموز</option>
            {% for user in users %}
            <option value="{{user.id}}">{{user.name}}</option>
            {% endfor%}
        </select>
    </div>
    <div id="data">

    </div>
    <br>

            
    <script>
    
        var select_box_element = document.querySelector('#select_box');
    
        dselect(select_box_element, {
            search: true
        });
        function send(){
            op_val = document.querySelector('#select_box').value
            fetch(`{{url_for('admin.get_data', _external=True)}}?val=${op_val}`)
                .then(response => response.json())
                .then(data => {
                    console.log(data["coin"]);
                })
                .catch(error => console.error('Error fetching cities:', error));
        }
    
    </script>
{% endblock %}

